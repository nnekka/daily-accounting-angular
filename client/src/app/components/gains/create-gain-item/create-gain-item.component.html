<mat-card *ngIf="!isPending; else loader">
  <mat-card-title>Сегодня заработали:</mat-card-title>
  <mat-card-content>
    <form
      [formGroup]="form"
      (submit)="onSubmit()"
    >
      <p>
        <mat-form-field>
          <input
            type="number"
            matInput
            placeholder="Сколько"
            formControlName="sum"
          >
          <mat-error></mat-error>
        </mat-form-field>
      </p>

      <div *ngIf="gainCategories">
        <p *ngIf="gainCategories.length > 0 && !editMode">
          <mat-form-field appearance="fill">
            <mat-label>Выбрать категорию</mat-label>
            <mat-select>
              <mat-option></mat-option>
              <mat-option
                *ngFor="let category of gainCategories"
                [value]="category._id"
                (click)="selectGainCategory(category._id)"
              >
                {{category.name}}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </p>
      </div>

      <div *ngIf="accounts">
        <p *ngIf="accounts.length > 0 && !editMode">
          <mat-form-field appearance="fill">
            <mat-label>Занести на счет</mat-label>
            <mat-select>
              <mat-option></mat-option>
              <mat-option
                *ngFor="let account of accounts"
                [value]="account._id"
                (click)="selectAccount(account._id)"
              >
                {{account.name}}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </p>

      </div>

      <div class="button">
        <button
          type="submit"
          mat-raised-button
          color="primary"
        >
          {{editMode ? 'Обновить' : 'Добавить'}}
        </button>

        <button
          mat-raised-button
          type="button"
          (click)="dialog.closeAll()"
          *ngIf="!editMode"
        >
          Cancel
        </button>
        <button
          mat-raised-button
          type="button"
          routerLink="/gains"
          *ngIf="editMode"
        >
          Cancel
        </button>
      </div>

    </form>
  </mat-card-content>
</mat-card>
<ng-template #loader>
  <mat-spinner></mat-spinner>
</ng-template>
